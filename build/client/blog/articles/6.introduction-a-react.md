---
title: Introduction √† React
author: Gkueny,
date: 2016-11-28T20:00:00
keywords: redux, tutorial-react
excerpt: "Cela fait maintenant quelques mois que je me suis mis √† la librairie React et √† son association avec Redux. Il est temps pour moi de vous en montrer un aper√ßu !"
---

Cela fait maintenant quelques mois que je me suis mis √† la librairie React et √† son association avec Redux. Il est temps pour moi de vous en montrer un aper√ßu !

> **Attention, cet article n'est pas √† jour.**

## Introduction

Pour tout vous dire, je suis tomb√© amoureux de React (et √©galement de React-native, mais cela sera pour une autre fois ;) ) et c'est pour cela qu'il m'est venu l'envie de partager mes connaissances √† ce sujet.

### Comment fonctionne React ?

React part d'une simple constatation : le DOM, c'est **L E N T** et en plus il change tout le temps.

- Cela change tout le temps ? Appelons la m√©thode `render()` √† chaque modification !
- Le DOM c'est lent ? Impl√©mentons notre propre `DOM virtuel` tr√®s rapide ! Et mettons √† jour le `DOM` par des op√©rations simples en le comparant avec notre nouveau `DOM virtuel`.

### De quoi est compos√©e une classe React ?

Chaque classe **React** est compos√©e au minimum d'un `state` (√©tat), de `props` (propri√©t√©s) et d'une m√©thode `render()`.

- Le state est d√©fini √† l'initialisation de la classe par la m√©thode `getInitialState()` et l'on peut le mettre √† jour par la m√©thode `setState`.
- Les props sont pass√©es √† l'initialisation et sont d√©finies en dehors de la classe.
- La m√©thode `render()` retourne un objet repr√©sentant une partie du **DOM virtuel**.

## 1. Commen√ßons notre projet React !

Chaque langage, librairie, framework a son "Hello World", **React** a sa "Todo-list".

Cependant, je vais ici vous proposer de r√©aliser toute autre chose pour me diff√©rencier un peu.
Nous allons donc construire une application listant des bars ainsi que leur happy-hour.

Nous pourrons :

- lister les bars.
- filtrer la liste.
- mettre en favori un bar.
- visualiser l'happy-hour de celui-ci.
- liker/disliker ce bar.

### Initialisation

Si vous avez d√©j√† essay√© de r√©aliser un projet React, vous avez d√ª rencontrer des difficult√©s avec [`Babel`](https://babeljs.io/) et [`Webpack`](http://putaindecode.io/fr/articles/js/webpack/).

Facebook l'a bien compris et nous permet de nous abstenir de toute cette configuration, qui peut √™tre difficile/incompr√©hensible, gr√¢ce au package npm `create-react-app`.

Installons celui-ci :

```shell
$ npm install -g create-react-app
```

On a ici besoin de Node.js >= 8.16 ou une version sup√©rieur

Cr√©ons notre application :

```shell
$ create-react-app HappyDrink
```

Je suis assez fier du nom üôÑ

Pour voir l'application dans votre navigateur :

```shell
$ cd HappyDrink
$ npm start
```

Cela lance pour vous le serveur : [ http://localhost:3000/](http://localhost:3000/) et le mettra √† jour √† chaque modification de fichier.

### Notre premier component **React**

Allons voir un peu ce que **React** nous a cr√©√© par d√©faut.

Nous avons tout d'abord le fichier `index.js` qui est notre point d'entr√©e.

```js
// Fichier : ./src/index.js
import React from "react";
import ReactDOM from "react-dom";
import App from "./App"; //on import le component App
import "./index.css";

// On utilise la m√©thode render() de ReactDOM pour d√©crire DOM ,
// le premier param√®tre correspond √† ce que l'on veut rendre
// et le deuxi√®me l'endroit o√π "accrocher" le DOM que l'on cr√©e.
// ici : l'√©l√©ment d'id root dans le fichier ./public/index.html
ReactDOM.render(<App />, document.getElementById("root"));
```

Regardons maintenant le component App

```js
// Fichier : ./src/App.js
import React, { Component } from "react";
import logo from "./logo.svg";
import "./App.css";

// Un Component impl√©mente la m√©thode render() et re√ßoit en param√®tre ses props
class App extends Component {
  // Notre fameuse m√©thode render()
  // On utilise dans cette m√©thode la syntaxe JSX
  render() {
    return (
      <div className="App">
        <div className="App-header">
          <img src={logo} className="App-logo" alt="logo" />
          <h2>Welcome to React</h2>
        </div>
        <p className="App-intro">
          To get started, edit <code>src/App.js</code> and save to reload.
        </p>
      </div>
    );
  }
}

export default App;
```

Regardons d'un peu plus pr√®s la m√©thode `render()`. Au premier coup d'oeil on a l'impression que l'on retourne du code **html**.

**Attention**, ici on utilise la syntaxe **JSX**, qui est tr√®s proche du **html**. Il y a quelques diff√©rences, comme l'utilisation de l'attribut `className` √† la place de `class`. Cela vient du fait que **JSX** est du Javascript et que `class` est un mot-cl√© r√©serv√©.

Le code **JSX** ci-dessous :

```js
  render() {
    return <h1 className="large">Hello World</h1>;
  }
```

correspond en r√©alit√© √† :

```js
  render() {
    return React.createElement("h1", { className: "large" }, "Hello World");
  }
```

On admettra facilement, que la syntaxe **JSX** est plus plaisante √† lire et √† √©crire.

#### Mais elles sont o√π tes `props` ici ?!?

"Amusons-nous" un peu avec, pour voir comment les utiliser :

```js
// Fichier : ./src/index.js [extrait]
//...

// On ajoute le param√®tre title √† notre component
ReactDOM.render(<App title="HappyDrink" />, document.getElementById("root"));
```

```js
// Fichier : ./src/App.js [extrait]
//...
// Le param√®tre title est ajout√© aux props que nous fournit la classe Component
class App extends Component {
  render() {
    // On peut ainsi facilement l'utiliser gr√¢ce √† l'objet this.props
    return (
      <div className="App">
        <div className="App-header">
          <img src={logo} className="App-logo" alt="logo" />
          <h2>Welcome to {this.props.title}</h2>
          {/* Et voil√† ! */}
        </div>
        <p className="App-intro">
          To get started, edit <code>src/App.js</code> and save to reload.
        </p>
      </div>
    );
  }
}
```

Et voil√†, c'est comme cela que l'on d√©finit/utilise les props.

![Screenshot 1](introduction-a-react/HappyDrink_Lecon_1_change_title.mp4)

## 2. Et HappyDrink dans tout √ßa ?

Okey, commen√ßons √† donner forme √† notre application.

### Nos Bars

Je vous propose, pour commencer, de cr√©er un fichier `fixtures.js` dans lequel nous allons stocker nos √©tablissements, tels que nous pourrions les recevoir via une **API**.

```js
// Fichier : ./src/fixtures.js
export const establishments = [
  {
    id: "0890786GH",
    name: "Tonton",
    description: "Un super bar √©tudiant",
  },
  {
    id: "0890786GD",
    name: "The Londow Town",
    description: "Un super bar √† bi√®re",
  },
  {
    id: "MJLMH0389",
    name: "Australian Bar",
    description: "Un super bar dansant",
  },
];
```

### Listons les bars

Maintenant, listons tout cela dans notre component `App` :

```js
// Fichier : ./src/App.js [extrait]
//...

// On n'oublie pas d'importer nos √©tablissements
import { establishments } from "./fixtures";
//...
  render() {
    const listEstablishment = establishments.map(establishment => {
      return (
        // L'attribut "key" permet √† React d'identifier les √©l√©ments.
        // Cela am√©liore les performances lors de l'ajout,
        // la modification et la suppression d'un √©l√©ment.
        <li key={establishment.id} className="establishment">
          <h3>{establishment.name}</h3>

          {establishment.description}
        </li>
      );
    });

    return (
      <div className="App">
        <div className="App-header">
          <img src={logo} className="App-logo" alt="logo" />
          <h2>Welcome to {this.props.title}</h2>
        </div>
        <div className="App-intro">{listEstablishment}</div>
      </div>
    );
  }
//...
```

Vous pouvez vous demander : mais c'est quoi cette fonction `map` ?

D√©cortiquons un peu ce bout de code :

```js
const listEstablishment = establishments.map((establishment) => {
  return (
    <li key={establishment.id} className="establishment">
      <h3>{establishment.name}</h3>
      {establishment.description}
    </li>
  );
});
```

> Note: La m√©thode `map()` cr√©e un nouveau tableau compos√© des images des √©l√©ments d'un tableau par une fonction donn√©e en argument. <br> > [https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Objets_globaux/Array/map](https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Objets_globaux/Array/map)

Ici, avec la fonction `(establishment) => {}` (notation es6), nous retournons l'√©l√©ment JSX `<li ... > ... </li>`.
Ce qui permet par la suite d'afficher les √©tablissements sous forme de liste avec la variable `{ listEstablishment }`.

```html
<!-- extrait de l'affichage html -->
<div class="App-intro">
  <li class="establishment">
    <h3>Tonton</h3>
    Un super bar √©tudiant
  </li>
  <li class="establishment">
    <h3>The Londow Town</h3>
    un super bar √† bi√®re
  </li>
  <li class="establishment">
    <h3>Australian Bar</h3>
    Un super bar dansan
  </li>
</div>
```

##### CSS

Faisons √©galement un petit ajout dans notre fichier css pour que cela soit un petit peu plus "beau" (notez les guillemets )

```css
/*Fichier : ./src/App.css [Extrait]*/
/*...*/
.establishment {
  background-color: gray;
  padding: 10px;
  margin: 5px 30px;
  border-radius: 8px;
  list-style: none;
}
/*...*/
```

Et nous voil√† avec une petite liste de bars !

![Screenshot 2](introduction-a-react/HappyDrink_Lecon_1_list_bars.mp4)

## 3. Organisons un peu tout cela

Pour l'instant, nous avons peu de fichier et nous les avons tous mis au m√™me endroit.
Cela va vite devenir un beau petit bordel lorsque notre application commencera √† grandir.

Je vous propose donc de r√©organiser tout cela :

```shell
src
|
|___assets
| |
| |___logo.svg
|
|___components
| |
| |___establishments
| | |
| | |___fixtures.js
| |
| |___App.js
|
|___css
| |
| |___App.css
| |
| |___index.css
|
|___App.test.js
|
|___index.js
```

Et de modifier les diff√©rents `import` comme ceci :

```js
// Fichier : ./src/index.js [imports]

import React from "react";
import ReactDOM from "react-dom";
import App from "./components/App";
import "./css/index.css";
```

```js
// Fichier : ./src/components/App.js [import]

import React, { Component } from "react";
import logo from "../assets/logo.svg";
import { establishments } from "./establishments/fixtures";
import "../css/App.css";
```

## 4. R√©capitulatif

Regardons un peu l'avancement de notre projet HappyDrink :

- <i class="fa fa-check" style="color: green" aria-hidden="true"></i> lister les bars
- <i class="fa fa-times" style="color: red" aria-hidden="true"></i> filtrer la liste
- <i class="fa fa-times" style="color: red" aria-hidden="true"></i> mettre en favori un bar
- <i class="fa fa-times" style="color: red" aria-hidden="true"></i> visualiser l'happy-hour de celui-ci
- <i class="fa fa-times" style="color: red" aria-hidden="true"></i> liker/disliker ce bar

Petit b√©mol : Nous ne r√©cup√©rons pas les √©tablissements d'une api pour l'instant.

Vous pourrez retrouver les sources de cette le√ßon √† l'adresse suivante : [github lecon_1](https://github.com/gkueny/HappyDrink/tree/Lecon_1)

## 5. Pour la suite

Ce que je vous propose, c'est d'essayer de r√©aliser seul les t√¢ches suivantes :

- cr√©er un nouveau `component` "Establishment", en vous inspirant d' `App`, qui s'occupera de l'affichage d'un √©tablissement dans notre liste.
- utiliser ce m√™me `component` "Establishment" dans la fonction `map` vu pr√©c√©demment.

Nous corrigerons cela dans la prochaine le√ßon !
